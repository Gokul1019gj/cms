{% extends 'navbar/dashboardnav.html' %}


{% load static %}

{% block content %}




<div>
    <div style="display: flex; align-items:end ;flex-direction: column;" class="">
      <a href="" class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#addevent"><ion-icon style="color: rgb(255, 255, 255);font-size: 22px;  float: left;" name="add-circle-outline">&#xE147;</ion-icon><span>Add Reviewer context</span> </a>
    </div>
<div class=""></div>
    <table class="table table-hover mt-5">
        <thead>
          <tr style="background-color:#585960; color:white ;">
            <th scope="col">Reviewer Name</th>
            <th scope="col"> context Name</th>
            <th scope="col">Event Name </th>
            <th scope="col">From Date</th>
            <th scope="col">To Date</th>
            
           
            
            <th scope="col"  >Venue</th>
            <th scope="col">Registration Fees</th>
            
            <th scope="col">Status</th>
            <th scope="col" colspan="3" >Actions</th>
            
            

          </tr>
        </thead>
        <tbody>

            {% for event in context %}
          <tr>
            <th scope="row">{{event.userid}} </th>
            <td>{{event.contextname.name}}</td>
            <td>{{event.contextname.event.title}}</td>
            <td>{{event.contextname.event.from_date}}</td>
            <td>{{event.contextname.event.to_date}}</td>
            
            <td>{{event.contextname.event.venue}}</td>
            <td>{{event.contextname.event.registration_fees}}</td>
            <td>
              {% if event.contextname.status == 'pending' %}
                            <span class="bg-warning rounded">Pending</span>
                            {% elif event.contextname.status == 'accepted' %}

                            <span class="bg-success rounded">Accepted</span>
                            {% elif event.contextname.status == 'declined' %}
                            <span class="bg-danger rounded">Declined</span>
                            {% endif %}
            </td>
            
            
            <td >
              
                       
              <a style="cursor: pointer;" class="" data-bs-toggle="modal" data-bs-target="#editevent{{event.id}}"> <span data-bs-toggle="tooltip" data-bs-placement="top" title="edit"><ion-icon   style="font-size: 22px; color: orange;pointer-events: none;" name="pencil"></ion-icon> </span></a>

               <div class="modal fade" id="editevent{{event.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Reviewer Paper</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                <div class="myform ">
                  <h1 class="text-center">Edit Reviewer Paper</h1>
                  <form action="/admin_edit_reviewer_context/{{event.id}}" method="post" enctype="multipart/form-data">
                      {% csrf_token %}
                      <div class="form-group">
                          <label for="name">Reviewer Name</label>
                          
                          <select name="userid" id="">
                           
                            {% for i in reviewer %}
                            {% if event.userid == i.userid %}
                            <option value="{{i.userid.id}}" selected>{{i.userid.username}}</option>
                            {% else %}
                            <option value="{{i.userid.id}}">{{i.userid.username}}</option>
                            {% endif %}
                            {% endfor %}
                          </select>
                        </div>
                
                
                
                
                        <div class="form-group mt-3">
                          <label for="num">Context</label>
                          <select name="contextname" id="">
                            <option value="" ></option>
                            {% for i in cs %}
                            {% if event.contextname.name == i.name %}
                            <option value="{{i.id}}" selected>{{i.name}}</option>
                            {% else %}
                            <option value="{{i.id}}" >{{i.name}}</option>
                            {% endif %}
                            {% endfor %}
                          </select>
                        </div>
                
                        
                       
                      
                
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                          <button type="submit" class="btn btn-info">Save changes</button>
                           
                          
                        </div>
                  </form>
                </div>
                </div>
                
                </div>
                </div>
                </div>
            
               
            </td>
            <td> <a href="" data-bs-toggle="modal" data-bs-target="#deleteevent{{event.id}}" ><span data-bs-toggle="tooltip" data-bs-placement="top" title="delete"><ion-icon style="font-size: 22px; color: red; pointer-events: none;" name="trash"></ion-icon></span></a>


              <div class="modal fade" id="deleteevent{{event.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Delete Event</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                     are you sure ? want to delete <span style="color: red;">{{event.userid}}</span>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <a href="{% url 'admin_delete_reviewer_context' event.id %}" class="btn btn-danger">Delete</a>
                    </div>
                  </div>
                </div>
              </div>
            </td>
            
            <td><a href="" data-bs-toggle="modal" data-bs-target="#viewevent{{event.id}}" ><span data-bs-toggle="tooltip" data-bs-placement="top" title="view"><ion-icon style="font-size: 22px;color: green; pointer-events: none;" name="eye"></ion-icon></span></a>
              <div class="modal fade" id="viewevent{{event.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel"> Event</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <div class=" " >
                        


                  <div class=" mt-5">
                    <p><span style="font-weight: bold;">Context NAME:</span> 
                    {{event.contextname.name}}
                    </p>
                  </div>

                  <div class="mt-5 text-center">

                    <embed type="application/pdf"
                            src="{% static event.contextname.contextfile.url %}"
                            width="100%" height="100%"/>


                            <a href="{{ event.contextname.contextfile.url }}" class="btn btn-primary mt-3">Preview</a>

                  </div>
                 
                  <!-- <div class=" mt-3 border ">
                    <p><span>ABSTRACT:</span> 
                    {{event.papername.abstract}}
                    </p>
                  </div> -->

                  <div   class="mt-5 text-center">
                    <div class="form-floating">
                      
                        <textarea readonly name="remark" class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 200px">{{event.contextname.remark}}</textarea>
                        <label for="floatingTextarea2">Remarks</label>
                        
                      </div>
                      

                  </div>
              
                      </div>
                  
                    </div>
                  </div>
                    </div>
                    
                  </div>
                </div>
              </div>
            
            
            </td>
            
            
            
          </tr>


         



          {% endfor %}
          
          
        </tbody>
      </table>






      






<div class="modal fade" id="addevent" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
  <div class="modal-content">
  <div class="modal-header">
  <h5 class="modal-title" id="exampleModalLabel">Add Reviewer Paper</h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
  </div>
  <div class="modal-body">
  <div class="myform ">
    <h1 class="text-center">Add Reviewer context</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label for="name">Reviewer Name</label>
            <!-- {{form.userid}} -->
            <select name="userid" id="">
              <option value="" ></option>
              {% for i in reviewer %}
              <option value="{{i.userid.id}}">{{i.userid.username}}</option>
              {% endfor %}
            </select>
            
          </div>
  
  
  
  
          <div class="form-group mt-3">
            <label for="num">context Name</label>
            <select name="contextname" id="">
              <option value="" ></option>
              {% for i in cs %}
              <option value="{{i.id}}">{{i.name}}</option>
              {% endfor %}
            </select>
            
          </div>
  
  
          
        
  
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Add</button>
             
            
          </div>
    </form>
  </div>
  </div>
  
  </div>
  </div>
  </div>
      <style>
        .table{
          border-radius: 5px;
          overflow: hidden;
          border-color: black;
    
        }
      </style>
</div>




{% endblock %}